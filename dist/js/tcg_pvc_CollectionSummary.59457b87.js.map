{"version":3,"sources":["webpack:///./node_modules/@philly/vue-comps/src/components/CollectionSummary.vue?78c4","webpack:///node_modules/@philly/vue-comps/src/components/CollectionSummary.vue","webpack:///./node_modules/@philly/vue-comps/src/components/CollectionSummary.vue?2adf","webpack:///./node_modules/@philly/vue-comps/src/components/CollectionSummary.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","_s","summary","staticRenderFns","CollectionSummaryvue_type_script_lang_js_","mixins","TopicComponent","computed","valueQuantities","isPlural","contextFnKey","contextFn","naturalList","contextSingular","context","options","singular","contextPlural","plural","descriptorSingular","descriptor","descriptorPlural","items","naturalizeQuantities","len","length","is_array_default","join","leadingItems","slice","lastItem","concat","slots","$store","state","getValue","reduce","obj","item","val","methods","arguments","undefined","values","keys_default","firstValue","quantity","types","includeZeroes","quantities","acc","type","value","labelWithNumber","labelSingular","label","labelPlural","quantityWithLabel","push","components_CollectionSummaryvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"kIAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,MAAAJ,EAAAM,GAAA,OAAAN,EAAAO,GAAAP,EAAAQ,SAAA,SACzFC,EAAA,yDCUAC,EAAA,CACAC,OAAA,CAAAC,EAAA,MACAC,SAAA,CAEAL,QAFA,WAIA,IAAAM,EAAAb,KAAAa,gBAEAC,EAAAd,KAAAc,SAAAD,GAEAE,EAAA,WAAAD,EAAA,qBACAE,EAAAhB,KAAAe,GAEAE,EAAAjB,KAAAiB,YAEAV,EAAAS,EAAAC,GAEA,OAAAV,GAEAW,gBAjBA,WAkBA,IAAAC,EAAAnB,KAAAoB,QAAAD,QACA,OAAAA,EAAAE,UAAAF,GAEAG,cArBA,WAsBA,IAAAH,EAAAnB,KAAAoB,QAAAD,QACA,OAAAA,EAAAI,QAAAJ,GAEAK,mBAzBA,WA0BA,IAAAC,EAAAzB,KAAAoB,QAAAK,WACA,OAAAA,EAAAJ,UAAAI,GAEAC,iBA7BA,WA8BA,IAAAD,EAAAzB,KAAAoB,QAAAK,WACA,OAAAA,EAAAF,QAAAE,EAAA,KAIAR,YAnCA,WAoCA,IAAAJ,EAAAb,KAAAa,gBACAc,EAAA3B,KAAA4B,qBAAAf,GACAgB,EAAAF,EAAAG,OACA,GAAAC,IAAAJ,IAAAE,EAAA,GACA,OAAAA,EACA,OAAAF,EAAA,GACA,OAAAE,EACA,OAAAF,EAAAK,KAAA,SAEA,IAAAC,EAAAN,EAAAO,MAAA,EAAAP,EAAAG,OAAA,GAAAE,KAAA,MACAG,EAAAR,IAAAG,OAAA,GACA,SAAAM,OAAAH,EAAA,UAAAG,OAAAD,GAGA,YAAAC,OAAApC,KAAA0B,mBAEAb,gBApDA,WAqDA,IAAAc,EAAA3B,KAAAqC,MAAAV,MAAA3B,KAAAsC,OAAAC,OACAC,EAAAxC,KAAAoB,QAAAoB,SAGA3B,EAAAc,EAAAc,OAAA,SAAAC,EAAAC,GACA,IAAAC,EAAAJ,EAAAG,GAGA,OAFAD,EAAAE,GAAAF,EAAAE,IAAA,EACAF,EAAAE,KACAF,GACA,IAEA,OAAA7B,IAGAgC,QAAA,CAGA/B,SAHA,WAGA,IAAAD,EAAAiC,UAAAhB,OAAA,QAAAiB,IAAAD,UAAA,GAAAA,UAAA,MACAE,EAAAC,IAAApC,GACA,OAAAmC,EAAAlB,OAAA,CACA,IAAAoB,EAAAF,EAAA,GACAG,EAAAtC,EAAAqC,GACA,OAAAC,EACA,SAGA,UAIAvB,qBAhBA,WAgBA,IAAAf,EAAAiC,UAAAhB,OAAA,QAAAiB,IAAAD,UAAA,GAAAA,UAAA,MAEAM,EAAApD,KAAAoB,QAAAgC,MACAC,EAAArD,KAAAoB,QAAAiC,cAGAC,EAAAF,EAAAX,OAAA,SAAAc,EAAAC,GACA,IAAAC,EAAAD,EAAAC,MACAN,EAAAtC,EAAA4C,IAAA,EAEA,OAAAN,EAAA,CACA,IAAAE,EACA,OAAAE,EAGAJ,EAAA,KAGA,IACAO,EADAC,EAAAH,EAAAI,MAIA,OAAAT,EAAA,CACA,IAAAU,EAAAL,EAAAjC,QAAAoC,EAAA,IACAD,EAAAG,OAGAH,EAAAC,EAIA,IAAAG,EAAA,GAAA1B,OAAAe,EAAA,KAAAf,OAAAsB,GAGA,OAFAH,EAAAQ,KAAAD,GAEAP,GACA,IAEA,OAAAD,KCrIwTU,EAAA,cCOxTC,EAAgBC,OAAAC,EAAA,KAAAD,CACdF,EACAlE,EACAU,GACF,EACA,KACA,WACA,MAIe4D,EAAA,WAAAH","file":"js/tcg_pvc_CollectionSummary.59457b87.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h3',[_vm._v(\"\\n  \"+_vm._s(_vm.summary)+\"\\n\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- A natural-language summary of a collection of things. -->\r\n\r\n<template>\r\n  <h3>\r\n    {{ summary }}\r\n  </h3>\r\n</template>\r\n\r\n<script>\r\n  import TopicComponent from './TopicComponent.vue';\r\n\r\n  export default {\r\n    mixins: [TopicComponent],\r\n    computed: {\r\n      // the final stringified output\r\n      summary() {\r\n        // get value quantity map\r\n        const valueQuantities = this.valueQuantities;\r\n        // check if plural\r\n        const isPlural = this.isPlural(valueQuantities);\r\n        // get context renderer\r\n        const contextFnKey = 'context' + (isPlural ? 'Plural' : 'Singular');\r\n        const contextFn = this[contextFnKey];\r\n        // get a natural list\r\n        const naturalList = this.naturalList;\r\n        // summarize\r\n        const summary = contextFn(naturalList);\r\n\r\n        return summary;\r\n      },\r\n      contextSingular() {\r\n        const context = this.options.context;\r\n        return context.singular || context;\r\n      },\r\n      contextPlural() {\r\n        const context = this.options.context;\r\n        return context.plural || context;\r\n      },\r\n      descriptorSingular() {\r\n        const descriptor = this.options.descriptor;\r\n        return descriptor.singular || descriptor;\r\n      },\r\n      descriptorPlural() {\r\n        const descriptor = this.options.descriptor;\r\n        return descriptor.plural || descriptor + 's';\r\n      },\r\n      // serializes naturalized quantities into a list\r\n      // e.g. \"1 apple and 2 oranges\"\r\n      naturalList() {\r\n        const valueQuantities = this.valueQuantities;\r\n        const items = this.naturalizeQuantities(valueQuantities);\r\n        const len = items.length;\r\n        if (Array.isArray(items) && len > 0) {\r\n          if (len === 1) {\r\n            return items[0];\r\n          } else if (len === 2) {\r\n            return items.join(' and ');\r\n          }\r\n          const leadingItems = items.slice(0, items.length - 1).join(', ');\r\n          const lastItem = items[items.length - 1];\r\n          return `${leadingItems}, and ${lastItem}`;\r\n        }\r\n        // TODO should this text be an option?\r\n        return `no ${this.descriptorPlural}`;\r\n      },\r\n      valueQuantities() {\r\n        const items = this.slots.items(this.$store.state);\r\n        const getValue = this.options.getValue;\r\n\r\n        // make an object of value => quantity\r\n        const valueQuantities = items.reduce((obj, item) => {\r\n          const val = getValue(item);\r\n          obj[val] = obj[val] || 0;\r\n          obj[val]++;\r\n          return obj;\r\n        }, {});\r\n\r\n        return valueQuantities;\r\n      },\r\n    },\r\n    methods: {\r\n      // takes the value of the valueQuantities computed property and returns\r\n      // the appropriate grammatical number.\r\n      isPlural(valueQuantities = {}) {\r\n        const values = Object.keys(valueQuantities);\r\n        if (values.length === 1) {\r\n          const firstValue = values[0];\r\n          const quantity = valueQuantities[firstValue];\r\n          if (quantity === 1) {\r\n            return false;\r\n          }\r\n        }\r\n        return true;\r\n      },\r\n      // takes the value quantity map and converts values to natural language\r\n      // quantities (e.g. {apple: 2} => \"2 apples\")\r\n      naturalizeQuantities(valueQuantities = {}) {\r\n        // get some options\r\n        const types = this.options.types;\r\n        const includeZeroes = this.options.includeZeroes;\r\n\r\n        // convert to natural language and sort per order of types option\r\n        const quantities = types.reduce((acc, type) => {\r\n          const value = type.value;\r\n          let quantity = valueQuantities[value] || 0;\r\n\r\n          if (quantity === 0) {\r\n            if (!includeZeroes) {\r\n              return acc;\r\n            }\r\n            // natural zero => \"no\"\r\n            quantity = 'no';\r\n          }\r\n\r\n          const labelSingular = type.label;\r\n          let labelWithNumber;\r\n\r\n          // singular\r\n          if (quantity !== 1) {\r\n            const labelPlural = type.plural || labelSingular + 's';\r\n            labelWithNumber = labelPlural;\r\n          // plural\r\n          } else {\r\n            labelWithNumber = labelSingular;\r\n          }\r\n\r\n          // make label and push\r\n          const quantityWithLabel = `${quantity} ${labelWithNumber}`;\r\n          acc.push(quantityWithLabel);\r\n\r\n          return acc;\r\n        }, []);\r\n\r\n        return quantities;\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./CollectionSummary.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./CollectionSummary.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CollectionSummary.vue?vue&type=template&id=92ff8f0a&scoped=true&\"\nimport script from \"./CollectionSummary.vue?vue&type=script&lang=js&\"\nexport * from \"./CollectionSummary.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"92ff8f0a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}