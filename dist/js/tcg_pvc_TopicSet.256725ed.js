(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tcg_pvc_TopicSet","tcg_pvc_Topic"],{1394:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.shouldShowTopic?o("div",[t.shouldShowHeader?o("a",{staticClass:"topic-header",attrs:{href:"#","data-topic-key":t.topicKey},on:{click:function(e){return e.preventDefault(),t.handleTopicHeaderClick(e)}}},[o("div",{staticClass:"topic-header-content"},[o("font-awesome-icon",{attrs:{icon:t.icon}}),o("div",{staticClass:"topic-header-label-holder"},[t._v("\n        "+t._s(t.topic.label)+"\n      ")])],1),o("span",{directives:[{name:"show",rawName:"v-show",value:"waiting"===t.status,expression:"status === 'waiting'"}],staticClass:"loading"},[o("font-awesome-icon",{staticClass:"fa-lg spin",attrs:{icon:"spinner"}})],1)]):t._e(),o("transition",{attrs:{name:"topic-body"}},[t.shouldShowBody?o("div",{staticClass:"topic-body",attrs:{"data-topic-key":t.topicKey}},[o("topic-component-group",{attrs:{"topic-components":t.topic.components}})],1):t._e()]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.shouldShowError,expression:"shouldShowError"}],staticClass:"topic-body",domProps:{innerHTML:t._s(this.errorMessage)}})],1):t._e()},i=[],r=o("a4bb"),a=o.n(r),n=o("5d73"),c=o.n(n),u=(o("6762"),o("db0c")),h=o.n(u),p=o("2bae"),l={name:"Topic",props:["topicKey"],components:{},beforeCreate:function(){this.$options.components.TopicComponentGroup=p["default"]},computed:{topic:function(){var t=this,e=this.$props.topicKey,o=this.$config.topics.filter(function(e){return e.key===t.$props.topicKey});if(1!==o.length)throw"Could not get single config object for topic '".concat(e,"'.");var s=o[0];return s},icon:function(){return this.topic.icon},isActive:function(){var t=this.topic.key,e=this.$store.state.activeTopic;return e===t},shouldShowHeader:function(){return this.$config.topics.length>1},dataSources:function(){return this.topic.dataSources||[]},hasData:function(){var t=this,e=this.dataSources.every(function(e){var o=t.$config.dataSources[e].targets;if(o){var s=t.$store.state.sources[e].targets,i=h()(s);return 0!==i.length&&i.every(function(t){return"waiting"!==t.status})}return!!t.$store.state.sources[e].data});return e},shouldShowBody:function(){var t="success"===this.status,e=this.hasData,o=t&&e&&this.isActive;return o},shouldShowTopic:function(){return!this.topic.showTopicOnlyIfDataExists||(!!this.showTopicBasedOnOtherData||this.showTopicOnlyIfDataExists)},shouldShowError:function(){var t=this.isActive&&("error"===this.status||"waiting"!==this.status&&!this.hasData);return t&&console.log("BINGO BINGO BINGO:",this.topicKey,"shouldShowError:",t,"status:",this.status,"hasData:",this.hasData),t},errorMessage:function(){return this.topic.errorMessage?this.topic.errorMessage(this.$store.state):"Could not locate records for that address."},status:{cache:!1,get:function(){var t,e=this,o=this.topic.dataSources||[];if(0===o.length)return"success";var s=o.map(function(t){var o=e.$config.dataSources[t].targets;if(o){var s=e.$store.state.sources[t].targets,i=h()(s);if(0===i.length)return;return i.map(function(t){return t.status})}return[e.$store.state.sources[t].status]}),i=[],r=!0,a=!1,n=void 0;try{for(var u,p=c()(s);!(r=(u=p.next()).done);r=!0){var l=u.value;if(l){var d=!0,f=!1,v=void 0;try{for(var y,w=c()(l);!(d=(y=w.next()).done);d=!0){var g=y.value;i.push(g)}}catch(T){f=!0,v=T}finally{try{d||null==w.return||w.return()}finally{if(f)throw v}}}}}catch(T){a=!0,n=T}finally{try{r||null==p.return||p.return()}finally{if(a)throw n}}return t=i.includes("waiting")?"waiting":i.includes("error")?"error":"success",t}},showTopicBasedOnOtherData:function(){if(!this.topic.showTopicBasedOnOtherData)return!1;var t=this.topic.showTopicBasedOnOtherData.requiredData,e=this.checkForData(t);if(!e)return!1;var o=a()(this.topic.showTopicBasedOnOtherData.otherData),s=[],i=!0,r=!1,n=void 0;try{for(var u,h=c()(o);!(i=(u=h.next()).done);i=!0){var p=u.value,l=this.topic.showTopicBasedOnOtherData.otherData[p],d=a()(l),f=!0,v=!1,y=void 0;try{for(var w,g=c()(d);!(f=(w=g.next()).done);f=!0){var T=w.value;this.$store.state.sources[p][T]===l[T]?s.push(!0):s.push(!1)}}catch(m){v=!0,y=m}finally{try{f||null==g.return||g.return()}finally{if(v)throw y}}}}catch(m){r=!0,n=m}finally{try{i||null==h.return||h.return()}finally{if(r)throw n}}return!s.includes(!1)},showTopicOnlyIfDataExists:function(){return this.checkForData(this.topic.showTopicOnlyIfDataExists)}},methods:{checkForData:function(t){var e=a()(t),o=!0,s=!0,i=!1,r=void 0;try{for(var n,u=c()(e);!(s=(n=u.next()).done);s=!0){var h=n.value,p=t[h].pathToDataArray,l=t[h].minDataLength,d=void 0;if(!this.$store.state.sources[h].data)return!1;p?1===p.length&&(d=this.$store.state.sources[h].data[p[0]]):d=this.$store.state.sources[h].data,d.length<l&&(o=!1)}}catch(f){i=!0,r=f}finally{try{s||null==u.return||u.return()}finally{if(i)throw r}}return o},configForBasemap:function(t){return this.$config.map.basemaps[t]},handleTopicHeaderClick:function(t){var e,o=this.$props.topicKey;o!==this.$store.state.activeTopic&&(e=o),this.$controller.handleTopicHeaderClick(e)}}},d=l,f=(o("d867"),o("2877")),v=Object(f["a"])(d,s,i,!1,null,"278b8daa",null);e["default"]=v.exports},"562f":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",t._l(this.$config.topics,function(t){return o("topic",{key:t.key,attrs:{topicKey:t.key}})}),1)},i=[],r=o("1394"),a=o("4cd6"),n={mixins:[a["a"]],name:"TopicSet",components:{Topic:r["default"]},mounted:function(){null!==this.$store.state.activeTopic&&""!==this.$store.state.activeTopic||this.setDefaultTopicActive()},methods:{setDefaultTopicActive:function(){this.$props.options.defaultTopic&&(this.$store.state.activeTopic=this.$props.options.defaultTopic)}}},c=n,u=o("2877"),h=Object(u["a"])(c,s,i,!1,null,null,null);e["default"]=h.exports},"8a09":function(t,e,o){},d867:function(t,e,o){"use strict";var s=o("8a09"),i=o.n(s);i.a}}]);
//# sourceMappingURL=tcg_pvc_TopicSet.256725ed.js.map