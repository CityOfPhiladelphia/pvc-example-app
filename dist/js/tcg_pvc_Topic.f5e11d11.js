(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tcg_pvc_Topic"],{1394:function(t,r,o){"use strict";o.r(r);var s=function(){var t=this,r=t.$createElement,o=t._self._c||r;return t.shouldShowTopic?o("div",[t.shouldShowHeader?o("a",{staticClass:"topic-header",attrs:{href:"#","data-topic-key":t.topicKey},on:{click:function(r){return r.preventDefault(),t.handleTopicHeaderClick(r)}}},[o("div",{staticClass:"topic-header-content"},[o("font-awesome-icon",{attrs:{icon:t.icon}}),o("div",{staticClass:"topic-header-label-holder"},[t._v("\n        "+t._s(t.topic.label)+"\n      ")])],1),o("span",{directives:[{name:"show",rawName:"v-show",value:"waiting"===t.status,expression:"status === 'waiting'"}],staticClass:"loading"},[o("font-awesome-icon",{staticClass:"fa-lg spin",attrs:{icon:"spinner"}})],1)]):t._e(),o("transition",{attrs:{name:"topic-body"}},[t.shouldShowBody?o("div",{staticClass:"topic-body",attrs:{"data-topic-key":t.topicKey}},[o("topic-component-group",{attrs:{"topic-components":t.topic.components}})],1):t._e()]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.shouldShowError,expression:"shouldShowError"}],staticClass:"topic-body",domProps:{innerHTML:t._s(this.errorMessage)}})],1):t._e()},e=[],a=o("a4bb"),i=o.n(a),n=o("5d73"),c=o.n(n),u=(o("6762"),o("db0c")),h=o.n(u),l=o("2bae"),p={name:"Topic",props:["topicKey"],components:{},beforeCreate:function(){this.$options.components.TopicComponentGroup=l["default"]},computed:{topic:function(){var t=this,r=this.$props.topicKey,o=this.$config.topics.filter(function(r){return r.key===t.$props.topicKey});if(1!==o.length)throw"Could not get single config object for topic '".concat(r,"'.");var s=o[0];return s},icon:function(){return this.topic.icon},isActive:function(){var t=this.topic.key,r=this.$store.state.activeTopic;return r===t},shouldShowHeader:function(){return this.$config.topics.length>1},dataSources:function(){return this.topic.dataSources||[]},hasData:function(){var t=this,r=this.dataSources.every(function(r){var o=t.$config.dataSources[r].targets;if(o){var s=t.$store.state.sources[r].targets,e=h()(s);return 0!==e.length&&e.every(function(t){return"waiting"!==t.status})}return!!t.$store.state.sources[r].data});return r},shouldShowBody:function(){var t="success"===this.status,r=this.hasData,o=t&&r&&this.isActive;return o},shouldShowTopic:function(){return!this.topic.showTopicOnlyIfDataExists||(!!this.showTopicBasedOnOtherData||this.showTopicOnlyIfDataExists)},shouldShowError:function(){var t=this.isActive&&("error"===this.status||"waiting"!==this.status&&!this.hasData);return t&&console.log("BINGO BINGO BINGO:",this.topicKey,"shouldShowError:",t,"status:",this.status,"hasData:",this.hasData),t},errorMessage:function(){return this.topic.errorMessage?this.topic.errorMessage(this.$store.state):"Could not locate records for that address."},status:{cache:!1,get:function(){var t,r=this,o=this.topic.dataSources||[];if(0===o.length)return"success";var s=o.map(function(t){var o=r.$config.dataSources[t].targets;if(o){var s=r.$store.state.sources[t].targets,e=h()(s);if(0===e.length)return;return e.map(function(t){return t.status})}return[r.$store.state.sources[t].status]}),e=[],a=!0,i=!1,n=void 0;try{for(var u,l=c()(s);!(a=(u=l.next()).done);a=!0){var p=u.value;if(p){var d=!0,f=!1,v=void 0;try{for(var w,y=c()(p);!(d=(w=y.next()).done);d=!0){var g=w.value;e.push(g)}}catch(m){f=!0,v=m}finally{try{d||null==y.return||y.return()}finally{if(f)throw v}}}}}catch(m){i=!0,n=m}finally{try{a||null==l.return||l.return()}finally{if(i)throw n}}return t=e.includes("waiting")?"waiting":e.includes("error")?"error":"success",t}},showTopicBasedOnOtherData:function(){if(!this.topic.showTopicBasedOnOtherData)return!1;var t=this.topic.showTopicBasedOnOtherData.requiredData,r=this.checkForData(t);if(!r)return!1;var o=i()(this.topic.showTopicBasedOnOtherData.otherData),s=[],e=!0,a=!1,n=void 0;try{for(var u,h=c()(o);!(e=(u=h.next()).done);e=!0){var l=u.value,p=this.topic.showTopicBasedOnOtherData.otherData[l],d=i()(p),f=!0,v=!1,w=void 0;try{for(var y,g=c()(d);!(f=(y=g.next()).done);f=!0){var m=y.value;this.$store.state.sources[l][m]===p[m]?s.push(!0):s.push(!1)}}catch(D){v=!0,w=D}finally{try{f||null==g.return||g.return()}finally{if(v)throw w}}}}catch(D){a=!0,n=D}finally{try{e||null==h.return||h.return()}finally{if(a)throw n}}return!s.includes(!1)},showTopicOnlyIfDataExists:function(){return this.checkForData(this.topic.showTopicOnlyIfDataExists)}},methods:{checkForData:function(t){var r=i()(t),o=!0,s=!0,e=!1,a=void 0;try{for(var n,u=c()(r);!(s=(n=u.next()).done);s=!0){var h=n.value,l=t[h].pathToDataArray,p=t[h].minDataLength,d=void 0;if(!this.$store.state.sources[h].data)return!1;l?1===l.length&&(d=this.$store.state.sources[h].data[l[0]]):d=this.$store.state.sources[h].data,d.length<p&&(o=!1)}}catch(f){e=!0,a=f}finally{try{s||null==u.return||u.return()}finally{if(e)throw a}}return o},configForBasemap:function(t){return this.$config.map.basemaps[t]},handleTopicHeaderClick:function(t){var r,o=this.$props.topicKey;o!==this.$store.state.activeTopic&&(r=o),this.$controller.handleTopicHeaderClick(r)}}},d=p,f=(o("d867"),o("2877")),v=Object(f["a"])(d,s,e,!1,null,"278b8daa",null);r["default"]=v.exports},"8a09":function(t,r,o){},d867:function(t,r,o){"use strict";var s=o("8a09"),e=o.n(s);e.a}}]);
//# sourceMappingURL=tcg_pvc_Topic.f5e11d11.js.map